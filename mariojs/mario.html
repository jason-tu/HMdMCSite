<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Super Mario JS</title>
<link rel="stylesheet/less" type="text/css" href="mario.less">
<!-- <script src="http://raw.github.com/cloudhead/less.js/master/dist/less-1.3.3.min.js" type="text/javascript"></script> -->
<script src="less-1.3.0.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-2.0.0.min.js" type="text/javascript"></script>
<script src="underscore-min.js" type="text/javascript"></script>
<script src="backbone-min.js" type="text/javascript"></script>
</head>
<body>
	<h1>Super Mario JS</h1>
    <div class="gamelevel">
        <canvas id="mario" width="240" height="224"></canvas>
        <canvas id="enemies" width="240" height="224"></canvas>
        <canvas id="level" width="240" height="224"></canvas>
        <canvas id="items" width="240" height="224"></canvas>
    </div>

    <input type="file" id="file-input" />
    <h3></h3>
    <pre id="file-content"></pre>

<button value="REMOVE ME" onclick="removeMe()"></button>
<textarea id="data"></textarea>
</body>
<script>
    function readSingleFile(e) {
      var file = e.target.files[0];
      if (!file) {
        return;
      }
      var reader = new FileReader();
      reader.onload = function(e) {
        var contents = e.target.result;

        // TODO: Somehow get contents into the script...

        document.head.appendChild(script);

      };
      reader.readAsText(file);
    }

    function removeMe() {
        console.log("!!!");
        document.head.appendChild(script);

    }

    document.getElementById('file-input')
      .addEventListener('change', readSingleFile, false);

    var script = document.createElement("script");
    script.src = "/mario.js";

</script>
</html>
